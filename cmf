js1



import { LightningElement, track } from 'lwc';
import { ShowToastEvent } from 'lightning/platformShowToastEvent';
import { createRecord } from 'lightning/uiRecordApi';
import { NavigationMixin } from 'lightning/navigation';
import CASH_MANAGEMENT_FORM_OBJECT from '@salesforce/schema/Cash_Management_Form__c';
import REQUESTOR_NAME_FIELD from '@salesforce/schema/Cash_Management_Form__c.Requestor_Name__c';
import CLIENT_NAME_FIELD from '@salesforce/schema/Cash_Management_Form__c.Client_Name__c';
import CLIENT_SRF_FIELD from '@salesforce/schema/Cash_Management_Form__c.Client_SRF__c';
import CLIENT_TYPE_FIELD from '@salesforce/schema/Cash_Management_Form__c.Client_Type__c';
import DATE_FIELD from '@salesforce/schema/Cash_Management_Form__c.Date__c';
import PRODUCTS_FIELD from '@salesforce/schema/Cash_Management_Form__c.Maintenance_Products__c';

export default class CashManagementForm extends NavigationMixin(LightningElement) {
    @track RequestorName = '';
    @track clientName = '';
    @track clientSRF = '';
    @track clientType = '';
    @track SelectedDate = '';
    @track selectedProducts = [];

    handleRequestorNameChange(event) {
        this.RequestorName = event.target.value;
    }

    handleClientNameChange(event) {
        this.clientName = event.target.value;
    }

    handleClientSRFChange(event) {
        this.clientSRF = event.target.value;
    }

    handleClientTypeChange(event) {
        this.clientType = event.detail.value;
    }

    handleCheckboxChange(event) {
        const product = event.target.label;
        if (event.target.checked) {
            this.selectedProducts.push(product);
        } else {
            this.selectedProducts = this.selectedProducts.filter(item => item !== product);
        }
    }

    handleDateChange(event) {
        this.SelectedDate = event.detail.value;
    }

    handleSubmit() {
        const fields = {};
        fields[REQUESTOR_NAME_FIELD.fieldApiName] = this.RequestorName;
        fields[CLIENT_NAME_FIELD.fieldApiName] = this.clientName;
        fields[CLIENT_SRF_FIELD.fieldApiName] = this.clientSRF;
        fields[CLIENT_TYPE_FIELD.fieldApiName] = this.clientType;
        fields[DATE_FIELD.fieldApiName] = this.SelectedDate;
        fields[PRODUCTS_FIELD.fieldApiName] = this.selectedProducts.join(';');

        const recordInput = { apiName: CASH_MANAGEMENT_FORM_OBJECT.objectApiName, fields };

        createRecord(recordInput)
            .then((record) => {
                this.dispatchEvent(
                    new ShowToastEvent({
                        title: 'Success',
                        message: 'Cash Management Form created successfully',
                        variant: 'success',
                    }),
                );
                this.handleNext(record.id);
            })
            .catch(error => {
                this.dispatchEvent(
                    new ShowToastEvent({
                        title: 'Error creating record',
                        message: error.body.message,
                        variant: 'error',
                    }),
                );
            });
    }

    handleNext(recordId) {
        this[NavigationMixin.Navigate]({
            type: 'standard__navItemPage',
            attributes: {
                apiName: 'Cash_Management_Form_Details_Page',
            },
            state: {
                c__selectedProducts: this.selectedProducts.join(';'),
                c__recordId: recordId
            },
        });
    }

    resetForm() {
        this.RequestorName = '';
        this.clientName = '';
        this.clientSRF = '';
        this.clientType = '';
        this.SelectedDate = '';
        this.selectedProducts = [];
    }

    handleClickUrl(){
        window.open('http://rbcnet.fg.rbc.com/ACH/file-828674.pdf','_blank');
    }

    get clientTypeOptions() {
        return [
            { label: 'Commercial Financial Services Client', value: 'Commercial Financial Services Client'},
            { label: 'GBSC Serviced Client', value: 'GBSC Serviced Client' },
            { label: 'Private Banking CBR Client', value: 'Private Banking CBR Client' },
        ];
    }

    get isCommercialClient() {
        return this.clientType === 'Commercial Financial Services Client';
    }

    get isGBSCClient() {
        return this.clientType === 'GBSC Serviced Client';
    }

    get isPrivateBankingClient() {
        return this.clientType === 'Private Banking CBR Client';
    }
}




js2




import { LightningElement, track } from 'lwc';
import { NavigationMixin } from 'lightning/navigation';
import { ShowToastEvent } from 'lightning/platformShowToastEvent';

export default class Rbcpcb_CashManagementFormDetails extends NavigationMixin(LightningElement) {
    @track selectedFormsArray = [];
    @track recordId;

    connectedCallback() {
        const urlParams = new URLSearchParams(window.location.search);
        const selectedForms = urlParams.get('c__selectedProducts');
        this.recordId = urlParams.get('c__recordId');
        
        console.log('Retrieved selected forms:', selectedForms); // Log for retrieved selected forms
        
        if (selectedForms) {
            this.selectedFormsArray = selectedForms.split(';').map(form => {
                return {
                    name: form,
                    isChangeAddress: form === 'Change Address',
                    isServiceAdministrator: form === 'Service Administrator'
                };
            });
        }
    }

    get hasSelectedForms() {
        return this.selectedFormsArray.length > 0;
    }

    handleBack() {
        this[NavigationMixin.Navigate]({
            type: 'standard__navItemPage',
            attributes: {
                apiName: 'Cash_Management_Form',  // The API name of your tab or page for the first LWC
            },
        });
    }

    handleSubmit(event) {
        event.preventDefault();
        const fields = event.detail.fields;
        fields.Cash_Management_Form__c = this.recordId;

        this.template.querySelectorAll('lightning-record-edit-form').forEach(form => {
            form.submit(fields);
        });
    }

    handleSuccess() {
        this.dispatchEvent(
            new ShowToastEvent({
                title: 'Success',
                message: 'Forms submitted successfully',
                variant: 'success',
            }),
        );

        this[NavigationMixin.Navigate]({
            type: 'standard__recordPage',
            attributes: {
                recordId: this.recordId,
                objectApiName: 'Cash_Management_Form__c',
                actionName: 'view',
            },
        });
    }

    handleError(event) {
        this.dispatchEvent(
            new ShowToastEvent({
                title: 'Error submitting form',
                message: event.detail.message,
                variant: 'error',
            }),
        );
    }
}




html2


<template>
    <lightning-card title="Cash Management Form Details">
        <template if:true={hasSelectedForms}>
            <template for:each={selectedFormsArray} for:item="form">
                <div key={form.name} class="slds-m-around_medium">
                    <template if:true={form.isChangeAddress}>
                        <lightning-record-edit-form 
                            object-api-name="Change_Address_Form__c" 
                            onsuccess={handleSuccess} 
                            onerror={handleError}>
                            <lightning-messages></lightning-messages>
                            <lightning-input-field field-name="Cash_Management_Form__c" value={recordId}></lightning-input-field>
                            <lightning-input-field field-name="Street__c"></lightning-input-field>
                            <lightning-input-field field-name="City__c"></lightning-input-field>
                            <lightning-input-field field-name="State__c"></lightning-input-field>
                            <lightning-input-field field-name="Postal_Code__c"></lightning-input-field>
                            <lightning-button type="submit" label="Save" class="lightning-button"></lightning-button>
                        </lightning-record-edit-form>
                    </template>
                    <template if:true={form.isServiceAdministrator}>
                        <lightning-record-edit-form 
                            object-api-name="Service_Administrator_Form__c" 
                            onsuccess={handleSuccess} 
                            onerror={handleError}>
                            <lightning-messages></lightning-messages>
                            <lightning-input-field field-name="Cash_Management_Form__c" value={recordId}></lightning-input-field>
                            <lightning-input-field field-name="Admin_Name__c"></lightning-input-field>
                            <lightning-input-field field-name="Admin_Email__c"></lightning-input-field>
                            <lightning-input-field field-name="Admin_Phone__c"></lightning-input-field>
                            <lightning-button type="submit" label="Save" class="lightning-button"></lightning-button>
                        </lightning-record-edit-form>
                    </template>
                </div>
            </template>
        </template>
        <template if:false={hasSelectedForms}>
